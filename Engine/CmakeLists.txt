cmake_minimum_required(VERSION 3.29)

include("$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake")

add_library(Engine STATIC 
    BaseGame.cpp
    BaseGame.h
    Matrix2x3.cpp
    Matrix2x3.h
    SoundEffect.cpp
    SoundEffect.h
    SoundStream.cpp
    SoundStream.h
    structs.cpp
    structs.h
    SVGParser.cpp
    SVGParser.h
    Texture.cpp
    Texture.h
    Transform.h
    utils.h
    utils.cpp
    Vector2f.h
    Vector2f.cpp
)

find_package(SDL2 CONFIG REQUIRED)
find_package(SDL2_image CONFIG REQUIRED)
find_package(SDL2_mixer CONFIG REQUIRED)
find_package(SDL2_ttf CONFIG REQUIRED)
find_package(OpenGL REQUIRED COMPONENTS OpenGL)

target_link_libraries(Engine PUBLIC $<TARGET_NAME_IF_EXISTS:SDL2::SDL2main> $<IF:$<TARGET_EXISTS:SDL2::SDL2>,SDL2::SDL2,SDL2::SDL2-static>)
target_link_libraries(Engine PUBLIC $<IF:$<TARGET_EXISTS:SDL2_image::SDL2_image>,SDL2_image::SDL2_image,SDL2_image::SDL2_image-static>)
target_link_libraries(Engine PUBLIC $<IF:$<TARGET_EXISTS:SDL2_ttf::SDL2_ttf>,SDL2_ttf::SDL2_ttf,SDL2_ttf::SDL2_ttf-static>)
target_link_libraries(Engine PUBLIC $<IF:$<TARGET_EXISTS:SDL2_mixer::SDL2_mixer>,SDL2_mixer::SDL2_mixer,SDL2_mixer::SDL2_mixer-static>)
target_link_libraries(Engine PUBLIC ${OPENGL_LIBRARIES})

target_compile_features(Engine PRIVATE cxx_std_17)
